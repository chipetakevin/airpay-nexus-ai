/* Mobile-First Design System for Divine Mobile - Enhanced for Website Friendliness */

/* Viewport and base mobile styles - Applied to all screen sizes */
html {
  /* Ensure proper viewport scaling */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  /* Smooth scrolling for better UX */
  scroll-behavior: smooth;
}

/* Enhanced viewport meta support */
@viewport {
  width: device-width;
  initial-scale: 1;
  maximum-scale: 5;
}

/* Improve font rendering on all devices */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Progressive Enhancement Media Queries */
@media (max-width: 767px) {
  .mobile-only { display: block !important; }
  .tablet-only, .desktop-only { display: none !important; }
  .hide-on-mobile { display: none !important; }
}

@media (min-width: 768px) and (max-width: 1023px) {
  .tablet-only { display: block !important; }
  .mobile-only, .desktop-only { display: none !important; }
  .hide-on-tablet { display: none !important; }
}

@media (min-width: 1024px) {
  .desktop-only { display: block !important; }
  .mobile-only, .tablet-only { display: none !important; }
  .hide-on-desktop { display: none !important; }
}

/* Touch-friendly base styles */
.touch-friendly {
  min-height: 44px; /* iOS minimum touch target */
  min-width: 44px;
  @apply cursor-pointer select-none;
}

/* Force mobile layout for devices that request desktop */
@media screen and (max-device-width: 1024px) {
  .force-mobile-layout {
    max-width: 100vw !important;
    width: 100% !important;
  }
}

/* Base mobile styles - Applied to all screen sizes */
.mobile-container {
  @apply w-full min-h-screen;
  @apply p-4 mx-auto;
  @apply bg-background text-foreground;
}

.mobile-header {
  @apply w-full h-14 flex items-center justify-between;
  @apply px-4 py-2 border-b border-border;
  @apply bg-card/80 backdrop-blur-sm;
  @apply sticky top-0 z-50;
}

.mobile-nav {
  @apply flex items-center space-x-2;
  @apply overflow-x-auto scrollbar-hide;
  @apply pb-2;
}

.mobile-nav-item {
  @apply flex-shrink-0 px-3 py-2 rounded-lg;
  @apply text-sm font-medium;
  @apply bg-muted hover:bg-muted/80;
  @apply text-muted-foreground hover:text-foreground;
  @apply transition-all duration-200;
  @apply touch-manipulation;
  min-height: 44px; /* iOS touch target minimum */
}

.mobile-nav-item.active {
  @apply bg-primary text-primary-foreground;
}

.mobile-card {
  @apply w-full rounded-lg border border-border;
  @apply bg-card text-card-foreground;
  @apply shadow-sm;
  @apply mb-4;
}

.mobile-card-header {
  @apply px-4 py-3 border-b border-border;
  @apply flex items-center justify-between;
}

.mobile-card-content {
  @apply p-4;
}

.mobile-button {
  @apply w-full h-12 px-4 py-2;
  @apply bg-primary text-primary-foreground;
  @apply rounded-lg border-0;
  @apply font-medium text-base;
  @apply flex items-center justify-center;
  @apply touch-manipulation;
  @apply transition-all duration-200;
  @apply hover:bg-primary/90 active:bg-primary/80;
  @apply disabled:opacity-50 disabled:pointer-events-none;
  min-height: 44px; /* iOS touch target minimum */
}

.mobile-button-secondary {
  @apply mobile-button;
  @apply bg-secondary text-secondary-foreground;
  @apply hover:bg-secondary/90 active:bg-secondary/80;
}

.mobile-button-outline {
  @apply mobile-button;
  @apply bg-transparent text-primary;
  @apply border border-primary;
  @apply hover:bg-primary hover:text-primary-foreground;
}

.mobile-input {
  @apply w-full h-12 px-4 py-2;
  @apply bg-background border border-input;
  @apply rounded-lg text-base;
  @apply focus:outline-none focus:ring-2 focus:ring-ring;
  @apply placeholder:text-muted-foreground;
  min-height: 44px; /* iOS touch target minimum */
}

.mobile-grid {
  @apply grid grid-cols-1 gap-4;
}

.mobile-grid-2 {
  @apply grid grid-cols-2 gap-4;
}

.mobile-flex {
  @apply flex flex-col space-y-4;
}

.mobile-flex-row {
  @apply flex flex-row items-center space-x-4;
}

.mobile-text-sm {
  @apply text-sm leading-relaxed;
}

.mobile-text-base {
  @apply text-base leading-relaxed;
}

.mobile-text-lg {
  @apply text-lg leading-relaxed font-medium;
}

.mobile-text-xl {
  @apply text-xl leading-relaxed font-semibold;
}

.mobile-section {
  @apply mb-6;
}

.mobile-section-title {
  @apply mobile-text-lg mb-3 text-foreground;
}

.mobile-list {
  @apply space-y-2;
}

.mobile-list-item {
  @apply flex items-center justify-between;
  @apply p-3 bg-card border border-border rounded-lg;
  @apply touch-manipulation;
  min-height: 56px; /* Comfortable touch target */
}

.mobile-avatar {
  @apply w-10 h-10 rounded-full;
  @apply bg-primary text-primary-foreground;
  @apply flex items-center justify-center;
  @apply font-medium text-sm;
}

.mobile-badge {
  @apply inline-flex items-center px-2 py-1;
  @apply bg-secondary text-secondary-foreground;
  @apply rounded-full text-xs font-medium;
}

.mobile-divider {
  @apply border-t border-border my-4;
}

.mobile-loading {
  @apply flex items-center justify-center;
  @apply p-8 text-muted-foreground;
}

.mobile-empty {
  @apply flex flex-col items-center justify-center;
  @apply p-8 text-center text-muted-foreground;
}

.mobile-sticky-footer {
  @apply fixed bottom-0 left-0 right-0;
  @apply p-4 bg-background/95 backdrop-blur-sm;
  @apply border-t border-border;
  @apply safe-area-pb;
}

.mobile-fab {
  @apply fixed bottom-6 right-6;
  @apply w-14 h-14 rounded-full;
  @apply bg-primary text-primary-foreground;
  @apply shadow-lg hover:shadow-xl;
  @apply flex items-center justify-center;
  @apply transition-all duration-200;
  @apply touch-manipulation;
  @apply z-50;
}

/* Safe area support for mobile devices */
.safe-area-pt {
  padding-top: env(safe-area-inset-top);
}

.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-pl {
  padding-left: env(safe-area-inset-left);
}

.safe-area-pr {
  padding-right: env(safe-area-inset-right);
}

/* Mobile content visibility fixes */
.mobile-content-container {
  min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  padding-bottom: calc(5rem + env(safe-area-inset-bottom));
}

.mobile-deals-container {
  padding-bottom: 6rem; /* Extra space for floating elements */
}

/* Ensure mobile content is fully scrollable */
@media (max-width: 767px) {
  .mobile-card {
    margin-bottom: 1rem;
  }
  
  .mobile-card:last-child {
    margin-bottom: 2rem; /* Extra space for last card */
  }
  
  /* Prevent content from being hidden behind fixed elements */
  .mobile-safe-scroll {
    scroll-padding-bottom: 5rem;
  }
}

/* Hide scrollbars on mobile */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Progressive enhancement animations */
.animations-enabled {
  --animation-duration: 0.3s;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
}

.animations-disabled {
  --animation-duration: 0s;
  --animation-easing: linear;
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Progressive enhancement for modern features */
@supports (display: grid) {
  .mobile-grid {
    display: grid;
  }
}

@supports not (display: grid) {
  .mobile-grid {
    display: flex;
    flex-wrap: wrap;
  }
}

/* Touch-optimized interactive elements */
@media (hover: none) and (pointer: coarse) {
  .mobile-button:hover {
    background-color: var(--primary);
  }
  
  .mobile-list-item:hover {
    background-color: var(--card);
  }
}

/* Hover support for desktop */
@media (hover: hover) {
  .mobile-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
}
@media (min-width: 640px) {
  .mobile-container {
    @apply max-w-2xl;
  }
  
  .mobile-grid {
    @apply grid-cols-2;
  }
  
  .mobile-button {
    @apply w-auto min-w-32;
  }
  
  .mobile-flex-row {
    @apply justify-between;
  }
}

@media (min-width: 768px) {
  .mobile-container {
    @apply max-w-4xl px-6;
  }
  
  .mobile-grid {
    @apply grid-cols-3;
  }
  
  .mobile-card {
    @apply mb-6;
  }
}

@media (min-width: 1024px) {
  .mobile-container {
    @apply max-w-6xl px-8;
  }
  
  .mobile-grid {
    @apply grid-cols-4;
  }
  
  .mobile-flex {
    @apply flex-row space-y-0 space-x-6;
  }
  
  .mobile-sticky-footer {
    @apply relative bottom-auto;
    @apply bg-transparent backdrop-blur-none;
    @apply border-t-0 p-0;
  }
}

/* Device-specific layout styles for Nerve Center BaaS */

/* Device-specific card styles */
.desktop-card {
  @apply bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700;
  @apply p-6 transition-all duration-300;
  @apply hover:shadow-xl hover:border-primary/20;
}

/* Removed duplicate mobile-card definition to prevent circular dependency */

/* Device-specific content areas */
.nerve-center-desktop-content {
  @apply max-w-none;
}

.nerve-center-mobile-content {
  @apply w-full px-2;
}

/* Device-specific navigation */
.nerve-center-desktop-nav {
  @apply hidden md:block;
}

.nerve-center-mobile-nav {
  @apply block md:hidden;
}

/* Device-specific fade-in animations */
.desktop-fade-in {
  @apply animate-in fade-in slide-in-from-bottom-4 duration-500;
}

.mobile-fade-in {
  @apply animate-in fade-in slide-in-from-bottom-2 duration-300;
}

/* Portal-specific styles */
.nerve-center-desktop-portal {
  background: linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--muted)) 100%);
}

.nerve-center-mobile-portal {
  @apply bg-background;
}

.nerve-center-fallback {
  @apply min-h-screen flex items-center justify-center bg-background;
}

/* Enhanced Mobile-Friendly Dashboard Features */

/* Touch-Friendly Service Cards */
.service-card {
  @apply relative overflow-hidden;
  @apply bg-card border border-border rounded-xl;
  @apply p-6 transition-all duration-300;
  @apply hover:shadow-lg hover:border-primary/30;
  @apply focus-within:ring-2 focus-within:ring-ring;
  min-height: 120px; /* Comfortable touch target */
  touch-action: manipulation;
}

.service-card-mobile {
  @apply service-card;
  @apply p-4 mb-4;
  min-height: 88px; /* Mobile-optimized height */
}

/* Enhanced Typography for Mobile Readability */
.dashboard-title {
  @apply text-2xl md:text-3xl lg:text-4xl font-bold;
  @apply text-foreground leading-tight;
  line-height: 1.2;
}

.dashboard-subtitle {
  @apply text-base md:text-lg text-muted-foreground;
  @apply leading-relaxed;
}

.service-title {
  @apply text-lg md:text-xl font-semibold;
  @apply text-foreground leading-snug;
}

.service-description {
  @apply text-sm md:text-base text-muted-foreground;
  @apply leading-relaxed;
}

/* Responsive Image Containers */
.responsive-image-container {
  @apply relative overflow-hidden;
  width: 100%;
  height: auto;
}

.responsive-image {
  @apply w-full h-auto;
  @apply object-cover object-center;
  max-width: 100%;
  height: auto;
  display: block;
}

/* Lazy Loading Support */
.lazy-image {
  @apply responsive-image;
  @apply opacity-0 transition-opacity duration-300;
}

.lazy-image.loaded {
  @apply opacity-100;
}

/* High DPI Display Support */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
  .responsive-image {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Enhanced Navigation for Mobile */
.mobile-navigation-enhanced {
  @apply fixed bottom-0 left-0 right-0 z-50;
  @apply bg-background/95 backdrop-blur-lg;
  @apply border-t border-border shadow-lg;
  @apply safe-area-pb;
}

.mobile-nav-button {
  @apply flex flex-col items-center justify-center;
  @apply px-3 py-2 text-xs font-medium;
  @apply text-muted-foreground transition-all duration-200;
  @apply hover:text-primary focus:text-primary;
  @apply focus:outline-none focus:ring-2 focus:ring-ring;
  min-height: 56px; /* Large touch target */
  min-width: 56px;
  touch-action: manipulation;
}

.mobile-nav-button.active {
  @apply text-primary bg-primary/10;
}

/* Accessibility Enhancements */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.focus-visible {
  @apply outline-none;
}

.focus-visible:focus-visible {
  @apply ring-2 ring-ring ring-offset-2;
}

/* Skip Links for Accessibility */
.skip-link {
  @apply absolute -top-10 left-4 z-[9999];
  @apply bg-primary text-primary-foreground;
  @apply px-4 py-2 rounded-md;
  @apply text-sm font-medium;
  @apply transition-all duration-200;
  @apply focus:top-4;
}

/* Enhanced Contrast Mode Support */
@media (prefers-contrast: high) {
  .service-card {
    @apply border-2;
  }
  
  .mobile-button {
    @apply border-2 border-primary;
  }
}

/* Color Scheme Preferences */
@media (prefers-color-scheme: dark) {
  .responsive-image {
    filter: brightness(0.9);
  }
}

/* Performance Optimizations */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Optimized Transitions */
.fast-transition {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.smooth-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Container Queries Support */
@container (min-width: 320px) {
  .service-card-mobile {
    @apply p-4;
  }
}

@container (min-width: 768px) {
  .service-card {
    @apply p-6;
  }
}